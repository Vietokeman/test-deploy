# ğŸ¨ KIáº¾N TRÃšC RAILWAY DEPLOYMENT

## ğŸ“Š SÆ¡ Äá»“ Tá»•ng Quan

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                    RAILWAY PLATFORM                     â”ƒ
â”ƒ                  (railway.app/dashboard)                â”ƒ
â”ƒ                                                         â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”ƒ
â”ƒ  â”‚         PROJECT: Trippio Backend               â”‚   â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”ƒ
â”ƒ                                                         â”ƒ
â”ƒ  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“                                   â”ƒ
â”ƒ  â”ƒ  PostgreSQL DB  â”ƒ  â† Railway Plugin (FREE)          â”ƒ
â”ƒ  â”ƒ  â–ª Database     â”ƒ                                   â”ƒ
â”ƒ  â”ƒ  â–ª Auto backup  â”ƒ  Environment Variables:           â”ƒ
â”ƒ  â”ƒ  â–ª 1GB storage  â”ƒ  â€¢ DATABASE_URL                   â”ƒ
â”ƒ  â”—â”â”â”â”â”â”â”¯â”â”â”â”â”â”â”â”â”â”›  â€¢ PGHOST, PGPORT, etc.           â”ƒ
â”ƒ         â”‚                                               â”ƒ
â”ƒ         â”‚ Port: 5432 (internal)                        â”ƒ
â”ƒ         â”‚                                               â”ƒ
â”ƒ  â”â”â”â”â”â”â”â–¼â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“                         â”ƒ
â”ƒ  â”ƒ    .NET 8.0 API Service   â”ƒ                         â”ƒ
â”ƒ  â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”ƒ                         â”ƒ
â”ƒ  â”ƒ  â”‚  Trippio.Api.dll    â”‚  â”ƒ  Dockerfile.railway     â”ƒ
â”ƒ  â”ƒ  â”‚  â–ª Controllers      â”‚  â”ƒ  â€¢ Build: Multi-stage   â”ƒ
â”ƒ  â”ƒ  â”‚  â–ª Services         â”‚  â”ƒ  â€¢ Runtime: .NET 8      â”ƒ
â”ƒ  â”ƒ  â”‚  â–ª Repositories     â”‚  â”ƒ  â€¢ Port: 8080           â”ƒ
â”ƒ  â”ƒ  â”‚  â–ª EF Core          â”‚  â”ƒ  â€¢ Health: /health      â”ƒ
â”ƒ  â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”ƒ                         â”ƒ
â”ƒ  â”ƒ                            â”ƒ  Environment:           â”ƒ
â”ƒ  â”ƒ  Port: 8080 (internal)    â”ƒ  â€¢ ASPNETCORE_ENV       â”ƒ
â”ƒ  â”ƒ  Health: /health          â”ƒ  â€¢ ConnectionStrings    â”ƒ
â”ƒ  â”—â”â”â”â”â”â”â”â”¯â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›  â€¢ JWT Settings         â”ƒ
â”ƒ          â”‚                      â€¢ CORS Origins         â”ƒ
â”ƒ          â”‚                                              â”ƒ
â”ƒ  â”â”â”â”â”â”â”â”â–¼â”â”â”â”â”â”â”â”â”â”“                                   â”ƒ
â”ƒ  â”ƒ   Redis Cache    â”ƒ  â† Railway Plugin (FREE)         â”ƒ
â”ƒ  â”ƒ  â–ª Basket data   â”ƒ                                   â”ƒ
â”ƒ  â”ƒ  â–ª Session       â”ƒ  Environment Variables:          â”ƒ
â”ƒ  â”ƒ  â–ª Idempotency   â”ƒ  â€¢ REDIS_URL                     â”ƒ
â”ƒ  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›  â€¢ REDIS_HOST, PORT, etc.        â”ƒ
â”ƒ                                                         â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”ƒ
â”ƒ  â”‚         NETWORKING                             â”‚   â”ƒ
â”ƒ  â”‚  â–ª Public Domain: your-app.up.railway.app     â”‚   â”ƒ
â”ƒ  â”‚  â–ª SSL/TLS: Auto-generated (Let's Encrypt)    â”‚   â”ƒ
â”ƒ  â”‚  â–ª HTTPS: Enforced by default                 â”‚   â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                          â”‚
                          â”‚ HTTPS
                          â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  PUBLIC INTERNET          â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                â”‚                â”‚
         â”‚                â”‚                â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚ Frontend â”‚   â”‚ Swagger  â”‚   â”‚  Mobile    â”‚
    â”‚ (Vercel) â”‚   â”‚ UI       â”‚   â”‚  App       â”‚
    â”‚          â”‚   â”‚          â”‚   â”‚            â”‚
    â”‚ React/   â”‚   â”‚ /swagger â”‚   â”‚ React      â”‚
    â”‚ Next.js  â”‚   â”‚          â”‚   â”‚ Native     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Workflow Deploy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Developer   â”‚
â”‚    Local     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. Code changes
       â”‚ 2. git commit
       â”‚ 3. git push
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   GitHub     â”‚
â”‚  Repository  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Webhook triggers Railway
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RAILWAY BUILD PROCESS       â”‚
â”‚                              â”‚
â”‚  1. Detect Dockerfile        â”‚
â”‚  2. Pull base images         â”‚
â”‚  3. Build .NET project       â”‚
â”‚  4. Run tests (if any)       â”‚
â”‚  5. Create Docker image      â”‚
â”‚  6. Push to Railway registry â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Image ready
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RAILWAY DEPLOYMENT          â”‚
â”‚                              â”‚
â”‚  1. Stop old container       â”‚
â”‚  2. Pull new image           â”‚
â”‚  3. Inject env variables     â”‚
â”‚  4. Start new container      â”‚
â”‚  5. Health check             â”‚
â”‚  6. Route traffic            â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ âœ… Deployment successful
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Live API   â”‚
â”‚   /swagger   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸŒ Request Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser   â”‚
â”‚  /Postman   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ HTTPS Request
       â”‚ https://your-app.up.railway.app/api/hotels
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Railway Load Balancer â”‚
â”‚  â€¢ SSL Termination     â”‚
â”‚  â€¢ Health Check        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Forward to container
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ASP.NET Core Middleware Pipeline â”‚
â”‚                                   â”‚
â”‚  1. CORS Middleware               â”‚
â”‚  2. Authentication Middleware     â”‚
â”‚  3. Authorization Middleware      â”‚
â”‚  4. Routing                       â”‚
â”‚  5. Controller Action             â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Need data?
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PostgreSQL  â”‚      â”‚    Redis    â”‚
â”‚  Database    â”‚â—„â”€â”€â”€â”€â–ºâ”‚   Cache     â”‚
â”‚              â”‚      â”‚             â”‚
â”‚ â€¢ Hotels     â”‚      â”‚ â€¢ Baskets   â”‚
â”‚ â€¢ Rooms      â”‚      â”‚ â€¢ Sessions  â”‚
â”‚ â€¢ Users      â”‚      â”‚ â€¢ Tokens    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Return data
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Response Pipeline                â”‚
â”‚                                   â”‚
â”‚  1. Serialize to JSON             â”‚
â”‚  2. Add headers                   â”‚
â”‚  3. Return HTTP Response          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ HTTP 200 OK
       â”‚ Content-Type: application/json
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser   â”‚
â”‚   Display   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’¾ Database Schema Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  First Deployment                  â”‚
â”‚  (Auto Migration)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. Container starts
       â”‚ 2. MigrationManager.cs runs
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EF Core Migrations                â”‚
â”‚                                    â”‚
â”‚  â€¢ Check __EFMigrationsHistory     â”‚
â”‚  â€¢ Apply pending migrations        â”‚
â”‚  â€¢ Create tables                   â”‚
â”‚  â€¢ Create indexes                  â”‚
â”‚  â€¢ Seed initial data (if any)      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Migration completed
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PostgreSQL Database               â”‚
â”‚                                    â”‚
â”‚  Tables:                           â”‚
â”‚  â€¢ AspNetUsers                     â”‚
â”‚  â€¢ AspNetRoles                     â”‚
â”‚  â€¢ Hotels                          â”‚
â”‚  â€¢ Rooms                           â”‚
â”‚  â€¢ Transports                      â”‚
â”‚  â€¢ Shows                           â”‚
â”‚  â€¢ Bookings                        â”‚
â”‚  â€¢ Orders                          â”‚
â”‚  â€¢ Payments                        â”‚
â”‚  â€¢ etc.                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ POST /api/auth/login
     â”‚ { username, password }
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AuthController     â”‚
â”‚  â€¢ Validate input   â”‚
â”‚  â€¢ Check user       â”‚
â”‚  â€¢ Verify password  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ Query PostgreSQL
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ASP.NET Identity   â”‚
â”‚  â€¢ UserManager      â”‚
â”‚  â€¢ SignInManager    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ âœ… Valid credentials
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TokenService       â”‚
â”‚  â€¢ Generate JWT     â”‚
â”‚  â€¢ Sign with key    â”‚
â”‚  â€¢ Set expiration   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ Return token
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚ â† { token: "eyJ...", expiresIn: 86400 }
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ Store token
     â”‚
     â”‚ Subsequent requests:
     â”‚ Authorization: Bearer eyJ...
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  JWT Middleware     â”‚
â”‚  â€¢ Validate token   â”‚
â”‚  â€¢ Check signature  â”‚
â”‚  â€¢ Check expiry     â”‚
â”‚  â€¢ Extract claims   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ âœ… Valid token
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Authorized Access  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ›’ Basket/Cart Flow (Redis)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ POST /api/basket/add
     â”‚ { productId, quantity, type }
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BasketController   â”‚
â”‚  â€¢ Authorize        â”‚
â”‚  â€¢ Get userId       â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ Call BasketService
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BasketService      â”‚
â”‚  â€¢ Validate product â”‚
â”‚  â€¢ Get price        â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ Save to Redis
     â”‚ Key: basket:{userId}
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Redis Cache        â”‚
â”‚                     â”‚
â”‚  basket:user123 {   â”‚
â”‚    items: [         â”‚
â”‚      {              â”‚
â”‚        id: "h1",    â”‚
â”‚        type: "hotel"â”‚
â”‚        quantity: 1  â”‚
â”‚      }              â”‚
â”‚    ]                â”‚
â”‚  }                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ âœ… Saved
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚ â† { success: true, basket: {...} }
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Fast access:
â€¢ No database queries
â€¢ In-memory speed
â€¢ Automatic expiry
```

## ğŸ“Š Monitoring Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Railway Dashboard              â”‚
â”‚  https://railway.app/dashboard  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Real-time data
       â”‚
   â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚        â”‚        â”‚         â”‚
   â–¼        â–¼        â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”
â”‚Logs â”‚ â”‚Metricsâ”‚ â”‚Healthâ”‚ â”‚Cost â”‚
â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜

Logs:
â€¢ Build logs
â€¢ Deploy logs
â€¢ Application logs (console)
â€¢ Serilog output

Metrics:
â€¢ CPU usage
â€¢ Memory usage
â€¢ Network traffic
â€¢ Request count

Health:
â€¢ /health endpoint status
â€¢ Container status
â€¢ Database connectivity
â€¢ Redis connectivity

Cost:
â€¢ Credit usage
â€¢ Execution hours
â€¢ Bandwidth
â€¢ Storage
```

## ğŸ”„ CI/CD Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Git Push    â”‚
â”‚ to main     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ GitHub webhook
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Railway triggers  â”‚
â”‚ automatic deploy  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â†’ Build â”€â”€â†’ Test â”€â”€â†’ Deploy â”€â”€â†’ Health Check
       â”‚      âœ“         âœ“        âœ“           âœ“
       â”‚
       â””â”€â”€â†’ Failed? â”€â”€â†’ Rollback to previous
                âœ—         (auto rollback)

Zero Downtime Deployment:
1. New container starts
2. Health check passes
3. Traffic switches
4. Old container stops
```

## ğŸ¯ URLs & Endpoints

```
Railway Domain: https://your-app.up.railway.app
â”‚
â”œâ”€â”€ /                           â†’ Redirect to /swagger
â”œâ”€â”€ /swagger                    â†’ Swagger UI
â”œâ”€â”€ /swagger/v1/swagger.json    â†’ OpenAPI spec
â”œâ”€â”€ /health                     â†’ Health check
â”œâ”€â”€ /health/ready               â†’ Readiness probe
â”œâ”€â”€ /health/live                â†’ Liveness probe
â”‚
â”œâ”€â”€ /api/
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ login               â†’ POST authentication
â”‚   â”‚   â”œâ”€â”€ register            â†’ POST registration
â”‚   â”‚   â””â”€â”€ refresh             â†’ POST token refresh
â”‚   â”‚
â”‚   â”œâ”€â”€ hotels/                 â†’ CRUD hotels
â”‚   â”œâ”€â”€ rooms/                  â†’ CRUD rooms
â”‚   â”œâ”€â”€ transports/             â†’ CRUD transports
â”‚   â”œâ”€â”€ shows/                  â†’ CRUD shows
â”‚   â”œâ”€â”€ basket/                 â†’ Basket operations
â”‚   â”œâ”€â”€ orders/                 â†’ Order management
â”‚   â”œâ”€â”€ payments/               â†’ Payment processing
â”‚   â””â”€â”€ user-profile/           â†’ User profile
â”‚
â””â”€â”€ /static/                    â†’ Static files (if any)
```

---

## ğŸ“ˆ Scaling Strategy

```
Current (Free Tier):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1 API Instance â”‚  â† 600MB RAM
â”‚  1 PostgreSQL   â”‚
â”‚  1 Redis        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

If need to scale:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Instance 1 â”‚ â†â”
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  API Instance 2 â”‚ â†â”¼â”€ Load Balancer
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  API Instance 3 â”‚ â†â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â†’ PostgreSQL (upgraded plan)
        â””â”€â†’ Redis (upgraded plan)

Railway Pro: $20/month
â€¢ Multiple replicas
â€¢ Auto-scaling
â€¢ More resources
```

---

**Diagram nÃ y giáº£i thÃ­ch:**
1. âœ… Kiáº¿n trÃºc tá»•ng quan
2. âœ… Workflow deploy
3. âœ… Request flow
4. âœ… Database migration
5. âœ… Authentication
6. âœ… Redis caching
7. âœ… Monitoring
8. âœ… CI/CD
9. âœ… URLs structure
10. âœ… Scaling strategy
